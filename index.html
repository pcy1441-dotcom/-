<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- 캐시 방지: 카톡/모바일/크롬 모두 최신 코드 -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<title>머더 역할+능력 추첨기</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  margin: 0;
  padding: 20px;
  text-align: center;
  color: black; /* 글씨색 검은색 */
}

h1 {
  font-size: clamp(24px, 6vw, 36px);
  margin-bottom: 20px;
}

input[type=number] {
  padding: 12px;
  font-size: 18px;
  width: 80px;
  text-align: center;
}

button {
  padding: 16px 28px;
  margin: 12px;
  font-size: clamp(16px,4.5vw,20px);
  cursor: pointer;
  border-radius: 10px;
  border: none;
}

#menu, #draw-area {
  margin-top: 40px;
}

#result {
  display: none;
  background: white;
  padding: 35px 20px;
  border-radius: 16px;
  margin-top: 40px;
}

#skill, #role {
  font-size: clamp(28px, 8vw, 46px);
  font-weight: bold;
  margin-bottom: 15px;
  color: black; /* 글씨색 검은색 */
}

#desc {
  font-size: clamp(16px, 4.5vw, 20px);
  color: black; /* 글씨색 검은색 */
  line-height: 1.4;
  margin-bottom: 30px;
}
</style>
</head>
<body>

<h1>머더 역할+능력 추첨기</h1>

<div id="menu">
  <label>인원 수 입력: <input type="number" id="playerCount" min="1" max="20" value="6"></label>
  <button onclick="startGame()">시작</button>
</div>

<div id="draw-area" style="display:none;">
  <div id="playerNum"></div>
  <button onclick="draw()">뽑기</button>
</div>

<div id="result">
  <div id="role"></div>
  <div id="skill"></div>
  <div id="desc"></div>
  <button onclick="nextRound()">다음</button>
</div>

<script>
const skills = {
  murder: [
    { name: "방탄", desc: "한 번 공격을 버틸 수 있습니다.(2목숨)" },
    { name: "가방", desc: "죽인 대상이 살아있는 것처럼 행동하다가 마지막에 사망합니다.(1명 한정)" },
    { name: "무능력", desc: "능력이 없습니다." },
    { name: "총잡이", desc: "보안관과 같은 방식으로 처치합니다.(어깨 터치)" },
    { name: "무능력", desc: "능력이 없습니다." },
    { name: "무능력", desc: "능력이 없습니다." }
  ],
  sheriff: [
    { name: "강인한", desc: "목숨이 2개가 됩니다." },
    { name: "무능력", desc: "능력이 없습니다." },
    { name: "무능력", desc: "능력이 없습니다." },
    { name: "무능력", desc: "능력이 없습니다." },
    { name: "마피아", desc: "머더와 모든 시민을 제거하면 즉시 승리합니다." },
    { name: "무능력", desc: "능력이 없습니다." }
  ],
  doctor: [
    { name: "무능력", desc: "능력이 없습니다." },
    { name: "무능력", desc: "능력이 없습니다." },
    { name: "자가치유", desc: "자신을 치료할 수 있습니다.(1회 한정)" },
    { name: "전문 의사", desc: "최대 2명까지 치료할 수 있습니다." },
    { name: "구급상자", desc: "생존자 1명에게 미리 지급해 스스로 치료할 수 있게 합니다.(머더 포함)" },
    { name: "무능력", desc: "능력이 없습니다." }
  ],
  citizen: [
    { name: "무능력", desc: "능력이 없습니다." },
    { name: "스파이", desc: "시민/보안관을 죽일수록 최대 2목숨까지 증가합니다. 머더를 죽이면 자신도 사망하며 시민 승리." },
    { name: "퍼블win", desc: "가장 먼저 머더에게 죽으면 즉시 시민이 승리합니다." },
    { name: "무능력", desc: "능력이 없습니다." },
    { name: "무능력", desc: "능력이 없습니다." },
    { name: "패링", desc: "한 번의 공격을 막아냅니다." }
  ]
};

let totalPlayers = 0;
let currentPlayer = 0;

function startGame() {
  totalPlayers = parseInt(document.getElementById("playerCount").value);
  if(isNaN(totalPlayers) || totalPlayers<1) { alert("인원수를 올바르게 입력하세요."); return; }
  currentPlayer = 1;
  document.getElementById("menu").style.display = "none";
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("playerNum").textContent = `플레이어 ${currentPlayer}번째`;
}

function draw() {
  const roles = Object.keys(skills);
  const role = roles[Math.floor(Math.random() * roles.length)];
  const abilityList = skills[role];
  const chosen = abilityList[Math.floor(Math.random() * abilityList.length)];

  document.getElementById("role").textContent = role.toUpperCase();
  document.getElementById("skill").textContent = chosen.name;
  document.getElementById("desc").textContent = chosen.desc;

  document.getElementById("draw-area").style.display = "none";
  document.getElementById("result").style.display = "block";
}

function nextRound() {
  currentPlayer++;
  if(currentPlayer > totalPlayers){
    alert("모든 플레이어 완료! 게임 초기화됩니다.");
    document.getElementById("result").style.display = "none";
    document.getElementById("draw-area").style.display = "none";
    document.getElementById("menu").style.display = "block";
    return;
  }
  document.getElementById("result").style.display = "none";
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("playerNum").textContent = `플레이어 ${currentPlayer}번째`;
}
</script>

</body>
</html>